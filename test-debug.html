<!DOCTYPE html>
<html>
<head>
    <title>Teste Debug - Gantt Chart</title>
    <link href="https://cdn.syncfusion.com/ej2/30.1.37/bootstrap5.css" rel="stylesheet" type="text/css"/>
    <script src="https://cdn.syncfusion.com/ej2/dist/ej2.min.js" type="text/javascript"></script>
</head>
<body>
    <div id="debug-log" style="padding: 10px; background: #f0f0f0; margin-bottom: 10px; font-family: monospace; max-height: 200px; overflow-y: auto;"></div>
    <div id="Gantt" style="height: 400px;"></div>
    
    <script>
        // Função de log personalizada
        function debugLog(message) {
            console.log(message);
            var logDiv = document.getElementById('debug-log');
            logDiv.innerHTML += new Date().toISOString() + ': ' + message + '<br>';
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        debugLog('Iniciando teste debug...');
        
        // Verificar se Syncfusion está disponível
        if (typeof ej === 'undefined') {
            debugLog('ERRO: Syncfusion não carregado');
        } else {
            debugLog('✓ Syncfusion carregado');
        }
        
        // Dados de teste simples
        var testData = [
            {
                TaskID: 1,
                TaskName: 'Teste Task 1',
                StartDate: new Date('2025-01-08'),
                Duration: 5,
                Progress: 50
            },
            {
                TaskID: 2,
                TaskName: 'Teste Task 2', 
                StartDate: new Date('2025-01-10'),
                Duration: 3,
                Progress: 30
            }
        ];
        
        debugLog('Dados de teste criados');
        
        try {
            // Configuração básica do Gantt
            var testGantt = new ej.gantt.Gantt({
                dataSource: testData,
                taskFields: {
                    id: 'TaskID',
                    name: 'TaskName',
                    startDate: 'StartDate',
                    duration: 'Duration',
                    progress: 'Progress'
                },
                columns: [
                    { field: 'TaskID', headerText: 'ID', width: 60 },
                    { field: 'TaskName', headerText: 'Task', width: 200 },
                    { field: 'StartDate', headerText: 'Start', width: 120, editType: 'datepickeredit' },
                    { field: 'Duration', headerText: 'Duration', width: 80, editType: 'numericedit' }
                ],
                editSettings: {
                    allowEditing: true,
                    allowAdding: true,
                    allowDeleting: true,
                    mode: 'Auto'
                },
                height: '400px'
            });
            
            debugLog('✓ Gantt criado com sucesso');
            
            testGantt.appendTo('#Gantt');
            debugLog('✓ Gantt anexado ao DOM');
            
        } catch (error) {
            debugLog('ERRO ao criar Gantt: ' + error.message);
            debugLog('Stack trace: ' + error.stack);
        }
    </script>
</body>
</html>
